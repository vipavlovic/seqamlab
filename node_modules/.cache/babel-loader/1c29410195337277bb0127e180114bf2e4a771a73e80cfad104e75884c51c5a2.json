{"ast":null,"code":"import _objectSpread from\"/Users/VPAVLOVI/Downloads/seqam-lab-site/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from\"react\";import bibtexParse from\"bibtex-parse-js\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Submit(){const[type,setType]=useState(\"paper\");const[form,setForm]=useState({});const[status,setStatus]=useState(\"\");const[bibtexData,setBibtexData]=useState([]);const[fileName,setFileName]=useState(\"\");const fields={paper:[\"title\",\"authors\",\"year\",\"journal\",\"doi\"],project:[\"title\",\"description\",\"date\"],person:[\"name\",\"title\",\"research_interests\",\"profile_link\"],course:[\"name\",\"description\",\"semester\"]};const handleChange=e=>{const{name,value}=e.target;setForm(_objectSpread(_objectSpread({},form),{},{[name]:value}));};const handleBibtexUpload=e=>{const file=e.target.files[0];if(!file)return;setFileName(file.name);const reader=new FileReader();reader.onload=()=>{try{const entries=bibtexParse.toJSON(reader.result);const parsed=entries.map(entry=>{var _entry$entryTags,_entry$entryTags2,_entry$entryTags3,_entry$entryTags4,_entry$entryTags5,_entry$entryTags6;return{title:((_entry$entryTags=entry.entryTags)===null||_entry$entryTags===void 0?void 0:_entry$entryTags.title)||\"\",authors:((_entry$entryTags2=entry.entryTags)===null||_entry$entryTags2===void 0?void 0:_entry$entryTags2.author)||\"\",year:((_entry$entryTags3=entry.entryTags)===null||_entry$entryTags3===void 0?void 0:_entry$entryTags3.year)||\"\",journal:((_entry$entryTags4=entry.entryTags)===null||_entry$entryTags4===void 0?void 0:_entry$entryTags4.journal)||((_entry$entryTags5=entry.entryTags)===null||_entry$entryTags5===void 0?void 0:_entry$entryTags5.booktitle)||\"\",doi:((_entry$entryTags6=entry.entryTags)===null||_entry$entryTags6===void 0?void 0:_entry$entryTags6.doi)||\"\"};}).filter(p=>p.title);setBibtexData(parsed);setStatus(\"\\u2705 Parsed \".concat(parsed.length,\" BibTeX entr\").concat(parsed.length===1?'y':'ies'));}catch(err){setStatus(\"❌ Failed to parse BibTeX file.\");}};reader.readAsText(file);};const handleSubmit=async e=>{e.preventDefault();const entries=type==='paper'&&bibtexData.length>0?bibtexData:[form];const issueTitle=type==='paper'&&bibtexData.length>0?\"[PAPER] Bulk import from \".concat(fileName):\"[\".concat(type.toUpperCase(),\"] \").concat(form.title||form.name);const issueBody=\"\\n\\nSubmitted via SEQAM Lab website:\\n\\n```json\\n\".concat(JSON.stringify(entries,null,2),\"\\n```\");const issueUrl=\"https://github.com/vipavlovic/seqamlab/issues/new?title=\".concat(encodeURIComponent(issueTitle),\"&body=\").concat(encodeURIComponent(issueBody));window.open(issueUrl,'_blank');setStatus(\"✅ GitHub Issue draft opened in new tab. Review and submit it manually.\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 max-w-2xl mx-auto\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-[#cc0033] mb-6 text-center\",children:\"Submit New Entry\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold mb-1\",children:\"Type\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"type\",value:type,onChange:e=>{setType(e.target.value);setForm({});setBibtexData([]);},className:\"border p-2 rounded w-full\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"paper\",children:\"Paper\"}),/*#__PURE__*/_jsx(\"option\",{value:\"project\",children:\"Project\"}),/*#__PURE__*/_jsx(\"option\",{value:\"person\",children:\"Person\"}),/*#__PURE__*/_jsx(\"option\",{value:\"course\",children:\"Course\"})]})]}),type===\"paper\"&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold mb-1\",children:\"Upload BibTeX File\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".bib\",onChange:handleBibtexUpload,className:\"border p-2 rounded w-full\"})]}),bibtexData.length===0&&fields[type].map(field=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold mb-1\",children:field.replace(/_/g,' ')}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:field,value:form[field]||\"\",onChange:handleChange,className:\"border p-2 rounded w-full\",required:true})]},field)),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"px-4 py-2 bg-[#cc0033] text-white rounded hover:bg-red-700\",children:\"Draft GitHub Issue\"})]}),(bibtexData.length>0||Object.keys(form).length>0)&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold mb-2\",children:\"Generated JSON\"}),/*#__PURE__*/_jsx(\"pre\",{className:\"bg-gray-100 p-4 text-sm rounded border overflow-x-auto\",children:JSON.stringify(bibtexData.length>0?bibtexData:form,null,2)})]}),status&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-center font-semibold\",children:status})]});}","map":{"version":3,"names":["React","useState","bibtexParse","jsx","_jsx","jsxs","_jsxs","Submit","type","setType","form","setForm","status","setStatus","bibtexData","setBibtexData","fileName","setFileName","fields","paper","project","person","course","handleChange","e","name","value","target","_objectSpread","handleBibtexUpload","file","files","reader","FileReader","onload","entries","toJSON","result","parsed","map","entry","_entry$entryTags","_entry$entryTags2","_entry$entryTags3","_entry$entryTags4","_entry$entryTags5","_entry$entryTags6","title","entryTags","authors","author","year","journal","booktitle","doi","filter","p","concat","length","err","readAsText","handleSubmit","preventDefault","issueTitle","toUpperCase","issueBody","JSON","stringify","issueUrl","encodeURIComponent","window","open","className","children","onSubmit","onChange","accept","field","replace","required","Object","keys"],"sources":["/Users/VPAVLOVI/Downloads/seqam-lab-site/src/pages/Submit.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport bibtexParse from \"bibtex-parse-js\";\n\nexport default function Submit() {\n  const [type, setType] = useState(\"paper\");\n  const [form, setForm] = useState({});\n  const [status, setStatus] = useState(\"\");\n  const [bibtexData, setBibtexData] = useState([]);\n  const [fileName, setFileName] = useState(\"\");\n\n  const fields = {\n    paper: [\"title\", \"authors\", \"year\", \"journal\", \"doi\"],\n    project: [\"title\", \"description\", \"date\"],\n    person: [\"name\", \"title\", \"research_interests\", \"profile_link\"],\n    course: [\"name\", \"description\", \"semester\"],\n  };\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setForm({ ...form, [name]: value });\n  };\n\n  const handleBibtexUpload = (e) => {\n    const file = e.target.files[0];\n    if (!file) return;\n    setFileName(file.name);\n\n    const reader = new FileReader();\n    reader.onload = () => {\n      try {\n        const entries = bibtexParse.toJSON(reader.result);\n        const parsed = entries.map(entry => ({\n          title: entry.entryTags?.title || \"\",\n          authors: entry.entryTags?.author || \"\",\n          year: entry.entryTags?.year || \"\",\n          journal: entry.entryTags?.journal || entry.entryTags?.booktitle || \"\",\n          doi: entry.entryTags?.doi || \"\"\n        })).filter(p => p.title);\n        setBibtexData(parsed);\n        setStatus(`✅ Parsed ${parsed.length} BibTeX entr${parsed.length === 1 ? 'y' : 'ies'}`);\n      } catch (err) {\n        setStatus(\"❌ Failed to parse BibTeX file.\");\n      }\n    };\n    reader.readAsText(file);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    const entries = type === 'paper' && bibtexData.length > 0 ? bibtexData : [form];\n    const issueTitle = type === 'paper' && bibtexData.length > 0\n      ? `[PAPER] Bulk import from ${fileName}`\n      : `[${type.toUpperCase()}] ${form.title || form.name}`;\n\n    const issueBody = `\\n\\nSubmitted via SEQAM Lab website:\\n\\n\\`\\`\\`json\\n${JSON.stringify(entries, null, 2)}\\n\\`\\`\\``;\n\n    const issueUrl = `https://github.com/vipavlovic/seqamlab/issues/new?title=${encodeURIComponent(issueTitle)}&body=${encodeURIComponent(issueBody)}`;\n\n    window.open(issueUrl, '_blank');\n    setStatus(\"✅ GitHub Issue draft opened in new tab. Review and submit it manually.\");\n  };\n\n  return (\n    <div className=\"p-6 max-w-2xl mx-auto\">\n      <h1 className=\"text-3xl font-bold text-[#cc0033] mb-6 text-center\">Submit New Entry</h1>\n\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\n        <div>\n          <label className=\"block text-sm font-semibold mb-1\">Type</label>\n          <select name=\"type\" value={type} onChange={(e) => { setType(e.target.value); setForm({}); setBibtexData([]); }} className=\"border p-2 rounded w-full\">\n            <option value=\"paper\">Paper</option>\n            <option value=\"project\">Project</option>\n            <option value=\"person\">Person</option>\n            <option value=\"course\">Course</option>\n          </select>\n        </div>\n\n        {type === \"paper\" && (\n          <div>\n            <label className=\"block text-sm font-semibold mb-1\">Upload BibTeX File</label>\n            <input type=\"file\" accept=\".bib\" onChange={handleBibtexUpload} className=\"border p-2 rounded w-full\" />\n          </div>\n        )}\n\n        {bibtexData.length === 0 && fields[type].map((field) => (\n          <div key={field}>\n            <label className=\"block text-sm font-semibold mb-1\">{field.replace(/_/g, ' ')}</label>\n            <input\n              type=\"text\"\n              name={field}\n              value={form[field] || \"\"}\n              onChange={handleChange}\n              className=\"border p-2 rounded w-full\"\n              required\n            />\n          </div>\n        ))}\n\n        <button type=\"submit\" className=\"px-4 py-2 bg-[#cc0033] text-white rounded hover:bg-red-700\">\n          Draft GitHub Issue\n        </button>\n      </form>\n\n      {(bibtexData.length > 0 || Object.keys(form).length > 0) && (\n        <div className=\"mt-6\">\n          <h2 className=\"text-lg font-semibold mb-2\">Generated JSON</h2>\n          <pre className=\"bg-gray-100 p-4 text-sm rounded border overflow-x-auto\">\n            {JSON.stringify(bibtexData.length > 0 ? bibtexData : form, null, 2)}\n          </pre>\n        </div>\n      )}\n\n      {status && <p className=\"mt-4 text-center font-semibold\">{status}</p>}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}